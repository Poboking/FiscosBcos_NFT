2024-04-06 17:20:49,689 INFO o.h.v.i.u.Version [background-preinit] HV000001: Hibernate Validator 8.0.0.Final
2024-04-06 17:20:49,725 INFO o.s.b.StartupInfoLogger [main] Starting PresentationApplication using Java 17.0.9 with PID 12724 (D:\CS\IDEA_javacode\a20-nft-3_7\presentation\target\classes started by NaGaYa in D:\CS\IDEA_javacode\a20-nft-3_7)
2024-04-06 17:20:49,728 DEBUG o.s.b.StartupInfoLogger [main] Running with Spring Boot v3.0.2, Spring v6.0.4
2024-04-06 17:20:49,730 INFO o.s.b.SpringApplication [main] No active profile set, falling back to 1 default profile: "default"
2024-04-06 17:20:50,551 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Multiple Spring Data modules found, entering strict repository configuration mode
2024-04-06 17:20:50,553 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-04-06 17:20:50,575 INFO o.s.d.r.c.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2024-04-06 17:20:51,107 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2024-04-06 17:20:51,115 INFO o.a.j.l.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8080"]
2024-04-06 17:20:51,116 INFO o.a.j.l.DirectJDKLog [main] Starting service [Tomcat]
2024-04-06 17:20:51,116 INFO o.a.j.l.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/10.1.5]
2024-04-06 17:20:51,192 INFO o.a.j.l.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2024-04-06 17:20:51,192 INFO o.s.b.w.s.c.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1407 ms
2024-04-06 17:20:52,019 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [main] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: org.knight.infrastructure.fisco.config.BcosConfig
2024-04-06 17:20:52,104 INFO o.f.b.s.n.ConnectionManager [main]  all connections, size: 2, list: [ConnectionInfo{host='43.143.86.190', port=20200}, ConnectionInfo{host='43.143.86.190', port=20201}]
2024-04-06 17:20:52,105 INFO o.f.b.s.n.NetworkImp [main] 
* TRACE INFORMATION:
----------------------------
====> STEP1: try to connect nodes with ecdsa context...

2024-04-06 17:20:52,105 INFO o.f.b.s.n.NetworkImp [main] ====> <==== STEP1-1: Load certificates for ecdsa context success..., start connManager with ECDSA sslContext
2024-04-06 17:20:52,152 INFO o.f.b.s.n.ConnectionManager [main]  build ECDSA ssl context with configured certificates 
2024-04-06 17:20:53,751 ERROR o.f.b.s.n.ConnectionManager [main] ssl handshake failed:/43.143.86.190:20200
 reason: The node closes the connection. Maybe connect to the sm node with ecdsa context or the node and the SDK are not belong to the same agency.
2024-04-06 17:20:53,752 ERROR o.f.b.s.n.ConnectionManager [main] ssl handshake failed:/43.143.86.190:20201
 reason: The node closes the connection. Maybe connect to the sm node with ecdsa context or the node and the SDK are not belong to the same agency.
2024-04-06 17:20:53,752 ERROR o.f.b.s.n.ChannelHandler [nioEventLoopGroup-2-2]  handshake failed, host: 43.143.86.190, port: 20201, reason: null, error stack: java.nio.channels.ClosedChannelException 
2024-04-06 17:20:53,752 ERROR o.f.b.s.n.ChannelHandler [nioEventLoopGroup-2-1]  handshake failed, host: 43.143.86.190, port: 20200, reason: null, error stack: java.nio.channels.ClosedChannelException 
2024-04-06 17:20:53,752 ERROR o.f.b.s.n.ConnectionManager [main]  all connections have failed, [{"code":1, "msg":"ssl handshake failed:/43.143.86.190:20200
 reason: The node closes the connection. Maybe connect to the sm node with ecdsa context or the node and the SDK are not belong to the same agency."}, {"code":1, "msg":"ssl handshake failed:/43.143.86.190:20201
 reason: The node closes the connection. Maybe connect to the sm node with ecdsa context or the node and the SDK are not belong to the same agency."}] 
2024-04-06 17:20:53,752 INFO o.f.b.s.n.NetworkImp [main] <==== STEP1 Result: try to connect nodes with ecdsa context failed. reason:
Failed to connect to all the nodes!
* ssl handshake failed:/43.143.86.190:20200
 reason: The node closes the connection. Maybe connect to the sm node with ecdsa context or the node and the SDK are not belong to the same agency.
* ssl handshake failed:/43.143.86.190:20201
 reason: The node closes the connection. Maybe connect to the sm node with ecdsa context or the node and the SDK are not belong to the same agency.

2024-04-06 17:20:53,752 INFO o.f.b.s.n.ChannelHandler [nioEventLoopGroup-2-2]  ssl close completion event, host: 43.143.86.190, port: 20201, ctx: 2095825500 
2024-04-06 17:20:53,752 INFO o.f.b.s.n.ChannelHandler [nioEventLoopGroup-2-1]  ssl close completion event, host: 43.143.86.190, port: 20200, ctx: 1947471767 
2024-04-06 17:20:55,829 INFO o.f.b.s.n.ConnectionManager [main] The netty has been stopped
2024-04-06 17:20:55,829 INFO o.f.b.s.n.NetworkImp [main] ----------------------------
====> STEP2: connect nodes with ecdsa context failed, try to connect nodes with sm-context...
2024-04-06 17:20:55,829 INFO o.f.b.s.n.NetworkImp [main] <==== STEP2-1: Load certificates for sm context success...
2024-04-06 17:20:55,830 INFO o.f.b.s.n.ConnectionManager [main]  all connections, size: 2, list: [ConnectionInfo{host='43.143.86.190', port=20200}, ConnectionInfo{host='43.143.86.190', port=20201}]
2024-04-06 17:20:56,154 INFO o.f.b.s.n.ChannelHandler [nioEventLoopGroup-3-2]  handshake success, host: 43.143.86.190, port: 20201, ctx: 197809788
2024-04-06 17:20:56,155 INFO o.f.b.s.n.ChannelHandler [nioEventLoopGroup-3-1]  handshake success, host: 43.143.86.190, port: 20200, ctx: 398345809
2024-04-06 17:20:56,155 INFO o.f.b.s.n.ConnectionManager [main]  ssl handshake success 43.143.86.190:20200
2024-04-06 17:20:56,155 INFO o.f.b.s.n.ConnectionManager [main]  ssl handshake success 43.143.86.190:20201
2024-04-06 17:20:56,258 INFO o.f.b.s.c.ChannelMsgHandler$1 [nioEventLoopGroup-3-1]  node: ClientVersion{version='2.9.1 gm', supportedVersion='2.9.1', chainId='1', buildTime='20220922 08:57:35', buildType='Linux/g++/Release', gitBranch='HEAD', gitCommitHash='83a87ad749475c0edcc6d5ce2dabd328a36d3bae'}, content: {"id":1,"jsonrpc":"2.0","result":{"Build Time":"20220922 08:57:35","Build Type":"Linux/g++/Release","Chain Id":"1","FISCO-BCOS Version":"2.9.1 gm","Git Branch":"HEAD","Git Commit Hash":"83a87ad749475c0edcc6d5ce2dabd328a36d3bae","Supported Version":"2.9.1"}}

2024-04-06 17:20:56,258 INFO o.f.b.s.c.ChannelMsgHandler$1 [nioEventLoopGroup-3-2]  node: ClientVersion{version='2.9.1 gm', supportedVersion='2.9.1', chainId='1', buildTime='20220922 08:57:35', buildType='Linux/g++/Release', gitBranch='HEAD', gitCommitHash='83a87ad749475c0edcc6d5ce2dabd328a36d3bae'}, content: {"id":0,"jsonrpc":"2.0","result":{"Build Time":"20220922 08:57:35","Build Type":"Linux/g++/Release","Chain Id":"1","FISCO-BCOS Version":"2.9.1 gm","Git Branch":"HEAD","Git Commit Hash":"83a87ad749475c0edcc6d5ce2dabd328a36d3bae","Supported Version":"2.9.1"}}

2024-04-06 17:20:56,259 INFO o.f.b.s.c.ChannelMsgHandler$1 [nioEventLoopGroup-3-1]  support channel handshake node
2024-04-06 17:20:56,259 INFO o.f.b.s.c.ChannelMsgHandler$1 [nioEventLoopGroup-3-2]  support channel handshake node
2024-04-06 17:20:56,303 INFO o.f.b.s.c.ChannelMsgHandler$2 [nioEventLoopGroup-3-2]  channel protocol handshake success, set socket channel protocol, host: 43.143.86.190:20201, channel protocol: ChannelProtocol [protocol=3, nodeVersion=2.9.1, EnumProtocol=VERSION_3]
2024-04-06 17:20:56,303 INFO o.f.b.s.c.ChannelMsgHandler$2 [nioEventLoopGroup-3-1]  channel protocol handshake success, set socket channel protocol, host: 43.143.86.190:20200, channel protocol: ChannelProtocol [protocol=3, nodeVersion=2.9.1, EnumProtocol=VERSION_3]
2024-04-06 17:20:56,317 INFO o.f.b.s.c.ChannelImp [main]  Connect to  nodes: 43.143.86.190:20200, 43.143.86.190:20201, 
2024-04-06 17:20:56,317 INFO o.f.b.s.BcosSDK [main] create BcosSDK, start channel success, cryptoType: 1
2024-04-06 17:20:56,322 INFO o.f.b.s.BcosSDK [main] create BcosSDK, start channel succ, channelProcessorThreadSize: 8, receiptProcessorThreadSize: 8
2024-04-06 17:20:56,329 INFO o.f.b.s.s.GroupManagerServiceImpl [main] registerBlockNumberNotifyHandler
2024-04-06 17:20:56,329 INFO o.f.b.s.s.GroupManagerServiceImpl [main] registerTransactionNotifyHandler
2024-04-06 17:20:56,671 INFO o.f.b.s.BcosSDK [main] create BcosSDK, create groupManagerService success
2024-04-06 17:20:56,793 INFO o.f.b.s.a.AmopImp [main] update subscribe inform 2 peers
2024-04-06 17:20:56,796 INFO o.f.b.s.a.AmopImp [main] update subscribe inform 2 peers
2024-04-06 17:20:56,797 INFO o.f.b.s.a.AmopImp [main] amop module started
2024-04-06 17:20:56,797 INFO o.f.b.s.a.AmopImp [main] update subscribe inform 2 peers
2024-04-06 17:20:56,797 INFO o.f.b.s.BcosSDK [main] create BcosSDK, create Amop success
2024-04-06 17:20:57,157 INFO o.f.b.s.c.Client [main] build client success for group 1, crypto type 1
2024-04-06 17:20:57,157 INFO o.f.b.s.BcosSDK [main] create client for group 1 success
2024-04-06 17:20:57,931 INFO c.f.g.Init [main] Graceful Response:已启动
2024-04-06 17:20:58,029 INFO o.s.b.a.w.s.WelcomePageHandlerMapping [main] Adding welcome page: class path resource [static/index.html]
2024-04-06 17:20:58,517 INFO o.a.j.l.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8080"]
2024-04-06 17:20:58,535 INFO o.s.b.w.e.t.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2024-04-06 17:20:58,549 INFO o.s.b.StartupInfoLogger [main] Started PresentationApplication in 9.26 seconds (process running for 10.382)
2024-04-06 17:20:58,551 INFO o.k.p.PresentationApplication [main] [Knife4j文档地址]: http://localhost:8080/doc.html
2024-04-06 17:21:03,555 INFO o.k.a.b.t.OrderTask [default-task-thread-1] cancelExpiredOrder
2024-04-06 17:21:03,595 INFO c.z.h.HikariDataSource [default-task-thread-1] HikariPool-1 - Starting...
2024-04-06 17:21:10,559 INFO c.z.h.p.HikariPool [default-task-thread-1] HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6c8e8b3b
2024-04-06 17:21:10,560 INFO c.z.h.HikariDataSource [default-task-thread-1] HikariPool-1 - Start completed.
2024-04-06 17:21:10,566 DEBUG o.a.i.l.j.BaseJdbcLogger [default-task-thread-1] ==>  Preparing: SELECT id,amount,biz_order_no,biz_type,issued_collection_id,collection_id,create_time,member_id,order_deadline,order_no,state,version,paid_time,cancel_time,biz_mode FROM pay_order WHERE (state = ? AND order_deadline < ?)
2024-04-06 17:21:10,582 DEBUG o.a.i.l.j.BaseJdbcLogger [default-task-thread-1] ==> Parameters: 1(String), 2024-04-06 17:21:03.0(Timestamp)
2024-04-06 17:21:10,622 DEBUG o.a.i.l.j.BaseJdbcLogger [default-task-thread-1] <==      Total: 0
2024-04-06 17:21:26,145 INFO o.a.j.l.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-04-06 17:21:26,145 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2024-04-06 17:21:26,147 INFO o.s.w.s.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 2 ms
2024-04-06 17:21:27,086 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: org.knight.presentation.member.transaction.WithdrawController
2024-04-06 17:21:27,139 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: org.knight.presentation.member.transaction.TransactionController
2024-04-06 17:21:27,153 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: org.knight.presentation.member.StorageController
2024-04-06 17:21:27,156 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: org.knight.presentation.member.transaction.SettlementAccountController
2024-04-06 17:21:27,173 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: org.knight.presentation.member.AuthenticationController
2024-04-06 17:21:27,180 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: org.knight.presentation.member.MemberController
2024-04-06 17:21:27,242 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: org.knight.presentation.member.NoticeController
2024-04-06 17:21:27,252 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: org.knight.presentation.member.UserArtworkController
2024-04-06 17:21:27,297 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: org.knight.presentation.member.MemberBalanceChangeLogController
2024-04-06 17:21:27,331 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: org.knight.presentation.member.ComposeActivityController
2024-04-06 17:21:27,339 WARN o.s.c.LocalVariableTableParameterNameDiscoverer [http-nio-8080-exec-3] Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: org.knight.presentation.member.CollectionController
2024-04-06 17:21:27,404 INFO o.s.a.AbstractOpenApiResource [http-nio-8080-exec-3] Init duration for springdoc-openapi is: 399 ms
2024-04-06 17:21:36,408 DEBUG o.a.i.l.j.BaseJdbcLogger [http-nio-8080-exec-4] ==>  Preparing: SELECT id,balance,deleted_flag,deleted_time,keep_login_duration,lately_login_time,login_pwd,mobile,nick_name,pay_pwd,real_name,registered_time,state,version,push_client_id,block_chain_addr,avatar,bind_real_name_time,identity_card,account_level,account_level_path,invite_code,inviter_id,bought_flag,sync_chain_time FROM member WHERE (mobile = ?)
2024-04-06 17:21:36,409 DEBUG o.a.i.l.j.BaseJdbcLogger [http-nio-8080-exec-4] ==> Parameters: 11111111111(String)
2024-04-06 17:21:36,432 TRACE o.a.i.l.j.BaseJdbcLogger [http-nio-8080-exec-4] <==    Columns: id, balance, deleted_flag, deleted_time, keep_login_duration, lately_login_time, login_pwd, mobile, nick_name, pay_pwd, real_name, registered_time, state, version, push_client_id, block_chain_addr, avatar, bind_real_name_time, identity_card, account_level, account_level_path, invite_code, inviter_id, bought_flag, sync_chain_time
2024-04-06 17:21:36,434 TRACE o.a.i.l.j.BaseJdbcLogger [http-nio-8080-exec-4] <==        Row: 2394875029834750923, 0.0, 0, null, 12, 2024-04-06 14:37:31, null, 11111111111, 藏家_FY686zlvN, null, null, 2024-04-02 17:05:11, 1, null, null, null, https://picx.zhimg.com/v2-626f5ca133cada3d89b597a60457fb66_l.jpg?source=32738c0c, null, null, 1, 7e6569492bf743d780b57585a1ac7668, PXBO5sB, null, 0, null
2024-04-06 17:21:36,438 DEBUG o.a.i.l.j.BaseJdbcLogger [http-nio-8080-exec-4] <==      Total: 1
2024-04-06 17:21:36,441 DEBUG o.a.i.l.j.BaseJdbcLogger [http-nio-8080-exec-4] ==>  Preparing: SELECT id,balance,deleted_flag,deleted_time,keep_login_duration,lately_login_time,login_pwd,mobile,nick_name,pay_pwd,real_name,registered_time,state,version,push_client_id,block_chain_addr,avatar,bind_real_name_time,identity_card,account_level,account_level_path,invite_code,inviter_id,bought_flag,sync_chain_time FROM member WHERE (mobile = ?)
2024-04-06 17:21:36,441 DEBUG o.a.i.l.j.BaseJdbcLogger [http-nio-8080-exec-4] ==> Parameters: 11111111111(String)
2024-04-06 17:21:36,471 TRACE o.a.i.l.j.BaseJdbcLogger [http-nio-8080-exec-4] <==    Columns: id, balance, deleted_flag, deleted_time, keep_login_duration, lately_login_time, login_pwd, mobile, nick_name, pay_pwd, real_name, registered_time, state, version, push_client_id, block_chain_addr, avatar, bind_real_name_time, identity_card, account_level, account_level_path, invite_code, inviter_id, bought_flag, sync_chain_time
2024-04-06 17:21:36,472 TRACE o.a.i.l.j.BaseJdbcLogger [http-nio-8080-exec-4] <==        Row: 2394875029834750923, 0.0, 0, null, 12, 2024-04-06 14:37:31, null, 11111111111, 藏家_FY686zlvN, null, null, 2024-04-02 17:05:11, 1, null, null, null, https://picx.zhimg.com/v2-626f5ca133cada3d89b597a60457fb66_l.jpg?source=32738c0c, null, null, 1, 7e6569492bf743d780b57585a1ac7668, PXBO5sB, null, 0, null
2024-04-06 17:21:36,473 DEBUG o.a.i.l.j.BaseJdbcLogger [http-nio-8080-exec-4] <==      Total: 1
2024-04-06 17:21:36,782 INFO o.k.p.c.MySaTokenListener [http-nio-8080-exec-4] ---------- doLogin侦听器: user登录成功，tokenValue: ecbd7296-4768-4daf-ba57-18e33f0b0a3b
2024-04-06 17:21:36,792 DEBUG o.a.i.l.j.BaseJdbcLogger [http-nio-8080-exec-4] ==>  Preparing: UPDATE member SET lately_login_time=? WHERE (id = ?)
2024-04-06 17:21:36,792 DEBUG o.a.i.l.j.BaseJdbcLogger [http-nio-8080-exec-4] ==> Parameters: 2024-04-06 17:21:36.0(Timestamp), 2394875029834750923(String)
2024-04-06 17:21:36,838 DEBUG o.a.i.l.j.BaseJdbcLogger [http-nio-8080-exec-4] <==    Updates: 1
2024-04-06 17:21:36,868 DEBUG o.a.i.l.j.BaseJdbcLogger [http-nio-8080-exec-4] ==>  Preparing: INSERT INTO login_log ( id, browser, ip_addr, msg, os, state, sub_system, user_name ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
2024-04-06 17:21:36,869 DEBUG o.a.i.l.j.BaseJdbcLogger [http-nio-8080-exec-4] ==> Parameters: 1776540753674108928(String), Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36 Edg/124.0.0.0(String), 0:0:0:0:0:0:0:1(String), 登录成功(String), Unknown(String), 1(String), member(String), 11111111111(String)
2024-04-06 17:21:36,936 DEBUG o.a.i.l.j.BaseJdbcLogger [http-nio-8080-exec-4] <==    Updates: 1
2024-04-06 17:21:45,543 INFO o.k.p.c.SaTokenConfigure [http-nio-8080-exec-5] [2394875029834750923]:用户访问
2024-04-06 17:21:45,573 DEBUG o.a.i.l.j.BaseJdbcLogger [http-nio-8080-exec-5] ==>  Preparing: UPDATE member SET nick_name=? WHERE (id = ?)
2024-04-06 17:21:45,574 DEBUG o.a.i.l.j.BaseJdbcLogger [http-nio-8080-exec-5] ==> Parameters: test_name_in_the_320(String), 2394875029834750923(String)
2024-04-06 17:21:45,624 DEBUG o.a.i.l.j.BaseJdbcLogger [http-nio-8080-exec-5] <==    Updates: 1
2024-04-06 17:21:45,625 INFO o.k.p.m.MemberController [http-nio-8080-exec-5] updateNickName success
2024-04-06 17:22:11,034 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2024-04-06 17:22:11,038 INFO c.z.h.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
